<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252" /><link rel="stylesheet" href="file:///C:\Program Files\MATLAB\R2013a\toolbox\matlab\codetools\matlab-report-styles.css" type="text/css" /><title>Function details for convTri</title><link rel="stylesheet" href="file:///C:\Program Files\MATLAB\R2013a\toolbox\matlab\codetools\matlab-report-styles.css" type="text/css" /></head><body bgcolor="#F8F8F8"><strong>This is a static copy of a profile report</strong><p><a href="file0.html">Home</a><p><span style="font-size:14pt; background:#FFE4B0">convTri (30 calls, 0.032 sec)</span><br/><i>Generated 26-Dec-2014 12:35:14 using cpu time.</i><br/>function in file D:\Logan\Documents\MATLAB\PiotrToolbox\channels\convTri.m<br/>Copy to new window for comparing multiple runs<div class="grayline"/><div class="grayline"/><strong>Parents</strong> (calling functions)<br/><p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Name</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Type</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td></tr><tr><td class="td-linebottomrt"><a href="file80.html">edgesChns</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">12</td></tr><tr><td class="td-linebottomrt"><a href="file86.html">gradientMag</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">6</td></tr><tr><td class="td-linebottomrt"><a href="file81.html">edgesDetect</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">6</td></tr><tr><td class="td-linebottomrt"><a href="file76.html">spDetect</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">6</td></tr></table><div class="grayline"/><strong>Lines where the most time was spent</strong><br/> <p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Line Number</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Code</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Total Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">% Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Time Plot</td></tr><tr><td class="td-linebottomrt"><a href="#Line86">86</a></td><td class="td-linebottomrt"><pre>J = convConst('convTri1',I,12/...</pre></td><td class="td-linebottomrt">15</td><td class="td-linebottomrt">0.016 s</td><td class="td-linebottomrt" class="td-linebottomrt">50.0%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2013a\toolbox\matlab\codetools\private\one-pixel.gif" width=50 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line88">88</a></td><td class="td-linebottomrt"><pre>J = convConst('convTri',I,r,s)...</pre></td><td class="td-linebottomrt">9</td><td class="td-linebottomrt">0.013 s</td><td class="td-linebottomrt" class="td-linebottomrt">40.6%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2013a\toolbox\matlab\codetools\private\one-pixel.gif" width=41 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line82">82</a></td><td class="td-linebottomrt"><pre>m=min(size(I,1),size(I,2)); if...</pre></td><td class="td-linebottomrt">24</td><td class="td-linebottomrt">0.001 s</td><td class="td-linebottomrt" class="td-linebottomrt">3.1%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2013a\toolbox\matlab\codetools\private\one-pixel.gif" width=3 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line89">89</a></td><td class="td-linebottomrt"><pre>end</pre></td><td class="td-linebottomrt">9</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt" class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2013a\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line87">87</a></td><td class="td-linebottomrt"><pre>else</pre></td><td class="td-linebottomrt">9</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt" class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2013a\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt">All other lines</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">0.002 s</td><td class="td-linebottomrt">6.3%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2013a\toolbox\matlab\codetools\private\one-pixel.gif" width=6 height=10></td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Totals</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">0.032 s</td><td class="td-linebottomrt" bgcolor="#F0F0F0">100%</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td></tr></table><div class="grayline"/><b>Children</b> (called functions)<br/><p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Name</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Type</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Total Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">% Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Time Plot</td></tr><tr><td class="td-linebottomrt"><a href="file85.html">channels\private\convConst</a></td><td class="td-linebottomrt">MEX-file</td><td class="td-linebottomrt">24</td><td class="td-linebottomrt">0.028 s</td><td class="td-linebottomrt">87.5%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2013a\toolbox\matlab\codetools\private\one-pixel.gif" width=87 height=10></td></tr><tr><td class="td-linebottomrt">Self time (built-ins, overhead, etc.)</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">0.004 s</td><td class="td-linebottomrt">12.5%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files\MATLAB\R2013a\toolbox\matlab\codetools\private\one-pixel.gif" width=13 height=10></td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Totals</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">0.032 s</td><td class="td-linebottomrt" bgcolor="#F0F0F0">100%</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td></tr></table><div class="grayline"/><strong>Code Analyzer results</strong><br/>No Code Analyzer messages.<div class="grayline"/><strong>Coverage results</strong><br/>Show coverage for parent directory <br/><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Total lines in function</td><td class="td-linebottomrt">96</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Non-code lines (comments, blank lines)</td><td class="td-linebottomrt">79</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines (lines that can run)</td><td class="td-linebottomrt">17</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines that did run</td><td class="td-linebottomrt">10</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines that did not run</td><td class="td-linebottomrt">7</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Coverage (did run/can run)</td><td class="td-linebottomrt">58.82 %</td></tr></table><div class="grayline"/><b>Function listing</b><br/><pre> <span style="color: #FF0000; font-weight: bold; text-decoration: none">  time</span> <span style="color: #0000FF; font-weight: bold; text-decoration: none">  calls</span>  <span style="font-weight: bold; text-decoration: none">line</span><br/>               <span style="color: #A0A0A0">   1</span> <span style="color: #A0A0A0; background: #FFFFFF;">function J = convTri( I, r, s, nomex )</span><br/>               <span style="color: #A0A0A0">   2</span> <span style="color: #228B22; background: #FFFFFF;">% Extremely fast 2D image convolution with a triangle filter.</span><br/>               <span style="color: #A0A0A0">   3</span> <span style="color: #228B22; background: #FFFFFF;">%</span><br/>               <span style="color: #A0A0A0">   4</span> <span style="color: #228B22; background: #FFFFFF;">% Convolves an image by a 2D triangle filter (the 1D triangle filter f is</span><br/>               <span style="color: #A0A0A0">   5</span> <span style="color: #228B22; background: #FFFFFF;">% [1:r r+1 r:-1:1]/(r+1)^2, the 2D version is simply conv2(f,f')). The</span><br/>               <span style="color: #A0A0A0">   6</span> <span style="color: #228B22; background: #FFFFFF;">% convolution can be performed in constant time per-pixel, independent of</span><br/>               <span style="color: #A0A0A0">   7</span> <span style="color: #228B22; background: #FFFFFF;">% the radius r. In fact the implementation is nearly optimal, with the</span><br/>               <span style="color: #A0A0A0">   8</span> <span style="color: #228B22; background: #FFFFFF;">% convolution taking only slightly more time than creating a copy of the</span><br/>               <span style="color: #A0A0A0">   9</span> <span style="color: #228B22; background: #FFFFFF;">% input array. Boundary effects are handled as if the image were padded</span><br/>               <span style="color: #A0A0A0">  10</span> <span style="color: #228B22; background: #FFFFFF;">% symmetrically prior to performing the convolution. An optional integer</span><br/>               <span style="color: #A0A0A0">  11</span> <span style="color: #228B22; background: #FFFFFF;">% downsampling parameter "s" can be specified, in which case the output is</span><br/>               <span style="color: #A0A0A0">  12</span> <span style="color: #228B22; background: #FFFFFF;">% downsampled by s (the implementation is efficient with downsampling</span><br/>               <span style="color: #A0A0A0">  13</span> <span style="color: #228B22; background: #FFFFFF;">% occurring simultaneously with smoothing, saving additional time).</span><br/>               <span style="color: #A0A0A0">  14</span> <span style="color: #228B22; background: #FFFFFF;">%</span><br/>               <span style="color: #A0A0A0">  15</span> <span style="color: #228B22; background: #FFFFFF;">% The output is exactly equivalent to the following Matlab operations:</span><br/>               <span style="color: #A0A0A0">  16</span> <span style="color: #228B22; background: #FFFFFF;">%  f = [1:r r+1 r:-1:1]/(r+1)^2;</span><br/>               <span style="color: #A0A0A0">  17</span> <span style="color: #228B22; background: #FFFFFF;">%  J = padarray(I,[r r],'symmetric','both');</span><br/>               <span style="color: #A0A0A0">  18</span> <span style="color: #228B22; background: #FFFFFF;">%  J = convn(convn(J,f,'valid'),f','valid');</span><br/>               <span style="color: #A0A0A0">  19</span> <span style="color: #228B22; background: #FFFFFF;">%  if(s&gt;1), t=floor(s/2)+1; J=J(t:s:end-s+t,t:s:end-s+t,:); end</span><br/>               <span style="color: #A0A0A0">  20</span> <span style="color: #228B22; background: #FFFFFF;">% The computation, however, is an order of magnitude faster than the above.</span><br/>               <span style="color: #A0A0A0">  21</span> <span style="color: #228B22; background: #FFFFFF;">%</span><br/>               <span style="color: #A0A0A0">  22</span> <span style="color: #228B22; background: #FFFFFF;">% When used as a smoothing filter, the standard deviation (sigma) of a tri</span><br/>               <span style="color: #A0A0A0">  23</span> <span style="color: #228B22; background: #FFFFFF;">% filter with radius r can be computed using [sigma=sqrt(r*(r+2)/6)]. For</span><br/>               <span style="color: #A0A0A0">  24</span> <span style="color: #228B22; background: #FFFFFF;">% the first few values of r this translates to: r=1: sigma=1/sqrt(2), r=2:</span><br/>               <span style="color: #A0A0A0">  25</span> <span style="color: #228B22; background: #FFFFFF;">% sigma=sqrt(4/3), r=3: sqrt(5/2), r=4: sigma=2. Given sigma, the</span><br/>               <span style="color: #A0A0A0">  26</span> <span style="color: #228B22; background: #FFFFFF;">% equivalent value of r can be computed via [r=sqrt(6*sigma*sigma+1)-1].</span><br/>               <span style="color: #A0A0A0">  27</span> <span style="color: #228B22; background: #FFFFFF;">%</span><br/>               <span style="color: #A0A0A0">  28</span> <span style="color: #228B22; background: #FFFFFF;">% For even finer grained control for very small amounts of smoothing, any</span><br/>               <span style="color: #A0A0A0">  29</span> <span style="color: #228B22; background: #FFFFFF;">% value of r between 0 and 1 can be used (normally if r&gt;=1 then r must be</span><br/>               <span style="color: #A0A0A0">  30</span> <span style="color: #228B22; background: #FFFFFF;">% an integer). In this case a filter of the form fp=[1 p 1]/(2+p) is used,</span><br/>               <span style="color: #A0A0A0">  31</span> <span style="color: #228B22; background: #FFFFFF;">% with p being determined automatically from r. The filter fp has a</span><br/>               <span style="color: #A0A0A0">  32</span> <span style="color: #228B22; background: #FFFFFF;">% standard deviation of [sigma=sqrt(2/(p+2))]. Hence p can be determined</span><br/>               <span style="color: #A0A0A0">  33</span> <span style="color: #228B22; background: #FFFFFF;">% from r by setting [sqrt(r*(r+2)/6)=sqrt(2/(p+2))], which gives</span><br/>               <span style="color: #A0A0A0">  34</span> <span style="color: #228B22; background: #FFFFFF;">% [p=12/r/(r+2)-2]. Note that r=1 gives p=2, so fp=[1 2 1]/4 which is the</span><br/>               <span style="color: #A0A0A0">  35</span> <span style="color: #228B22; background: #FFFFFF;">% same as the normal r=1 triangle filter. As r goes to 0, p goes to</span><br/>               <span style="color: #A0A0A0">  36</span> <span style="color: #228B22; background: #FFFFFF;">% infinity, and fp becomes the delta function [0 1 0]. The computation for</span><br/>               <span style="color: #A0A0A0">  37</span> <span style="color: #228B22; background: #FFFFFF;">% r&lt;=1 is particularly fast.</span><br/>               <span style="color: #A0A0A0">  38</span> <span style="color: #228B22; background: #FFFFFF;">%</span><br/>               <span style="color: #A0A0A0">  39</span> <span style="color: #228B22; background: #FFFFFF;">% The related function convBox performs convolution with a box filter,</span><br/>               <span style="color: #A0A0A0">  40</span> <span style="color: #228B22; background: #FFFFFF;">% which is slightly faster but has worse properties if used for smoothing.</span><br/>               <span style="color: #A0A0A0">  41</span> <span style="color: #228B22; background: #FFFFFF;">%</span><br/>               <span style="color: #A0A0A0">  42</span> <span style="color: #228B22; background: #FFFFFF;">% This code requires SSE2 to compile and run (most modern Intel and AMD</span><br/>               <span style="color: #A0A0A0">  43</span> <span style="color: #228B22; background: #FFFFFF;">% processors support SSE2). Please see: http://en.wikipedia.org/wiki/SSE2.</span><br/>               <span style="color: #A0A0A0">  44</span> <span style="color: #228B22; background: #FFFFFF;">%</span><br/>               <span style="color: #A0A0A0">  45</span> <span style="color: #228B22; background: #FFFFFF;">% USAGE</span><br/>               <span style="color: #A0A0A0">  46</span> <span style="color: #228B22; background: #FFFFFF;">%  J = convTri( I, r, [s], [nomex] )</span><br/>               <span style="color: #A0A0A0">  47</span> <span style="color: #228B22; background: #FFFFFF;">%</span><br/>               <span style="color: #A0A0A0">  48</span> <span style="color: #228B22; background: #FFFFFF;">% INPUTS</span><br/>               <span style="color: #A0A0A0">  49</span> <span style="color: #228B22; background: #FFFFFF;">%  I      - [hxwxk] input k channel single image</span><br/>               <span style="color: #A0A0A0">  50</span> <span style="color: #228B22; background: #FFFFFF;">%  r      - integer filter radius (or any value between 0 and 1)</span><br/>               <span style="color: #A0A0A0">  51</span> <span style="color: #228B22; background: #FFFFFF;">%           filter standard deviation is: sigma=sqrt(r*(r+2)/6)</span><br/>               <span style="color: #A0A0A0">  52</span> <span style="color: #228B22; background: #FFFFFF;">%  s      - [1] integer downsampling amount after convolving</span><br/>               <span style="color: #A0A0A0">  53</span> <span style="color: #228B22; background: #FFFFFF;">%  nomex  - [0] if true perform computation in matlab (for testing/timing)</span><br/>               <span style="color: #A0A0A0">  54</span> <span style="color: #228B22; background: #FFFFFF;">%</span><br/>               <span style="color: #A0A0A0">  55</span> <span style="color: #228B22; background: #FFFFFF;">% OUTPUTS</span><br/>               <span style="color: #A0A0A0">  56</span> <span style="color: #228B22; background: #FFFFFF;">%  J      - [hxwxk] smoothed image</span><br/>               <span style="color: #A0A0A0">  57</span> <span style="color: #228B22; background: #FFFFFF;">%</span><br/>               <span style="color: #A0A0A0">  58</span> <span style="color: #228B22; background: #FFFFFF;">% EXAMPLE - matlab versus mex</span><br/>               <span style="color: #A0A0A0">  59</span> <span style="color: #228B22; background: #FFFFFF;">%  I = single(imResample(imread('cameraman.tif'),[480 640]))/255;</span><br/>               <span style="color: #A0A0A0">  60</span> <span style="color: #228B22; background: #FFFFFF;">%  r = 5; s = 2; % set parameters as desired</span><br/>               <span style="color: #A0A0A0">  61</span> <span style="color: #228B22; background: #FFFFFF;">%  tic, J1=convTri(I,r,s); toc % mex version (fast)</span><br/>               <span style="color: #A0A0A0">  62</span> <span style="color: #228B22; background: #FFFFFF;">%  tic, J2=convTri(I,r,s,1); toc % matlab version (slow)</span><br/>               <span style="color: #A0A0A0">  63</span> <span style="color: #228B22; background: #FFFFFF;">%  figure(1); im(J1); figure(2); im(abs(J2-J1));</span><br/>               <span style="color: #A0A0A0">  64</span> <span style="color: #228B22; background: #FFFFFF;">%</span><br/>               <span style="color: #A0A0A0">  65</span> <span style="color: #228B22; background: #FFFFFF;">% EXAMPLE - triangle versus gaussian smoothing</span><br/>               <span style="color: #A0A0A0">  66</span> <span style="color: #228B22; background: #FFFFFF;">%  I = single(imResample(imread('cameraman.tif'),[480 640]))/255;</span><br/>               <span style="color: #A0A0A0">  67</span> <span style="color: #228B22; background: #FFFFFF;">%  sigma = 4; rg = ceil(3*sigma); f = filterGauss(2*rg+1,[],sigma^2);</span><br/>               <span style="color: #A0A0A0">  68</span> <span style="color: #228B22; background: #FFFFFF;">%  tic, J1=conv2(conv2(imPad(I,rg,'symmetric'),f,'valid'),f','valid'); toc</span><br/>               <span style="color: #A0A0A0">  69</span> <span style="color: #228B22; background: #FFFFFF;">%  r=sqrt(6*sigma*sigma+1)-1; tic, J2=convTri(I,r); toc</span><br/>               <span style="color: #A0A0A0">  70</span> <span style="color: #228B22; background: #FFFFFF;">%  figure(1); im(J1); figure(2); im(J2); figure(3); im(abs(J2-J1));</span><br/>               <span style="color: #A0A0A0">  71</span> <span style="color: #228B22; background: #FFFFFF;">%</span><br/>               <span style="color: #A0A0A0">  72</span> <span style="color: #228B22; background: #FFFFFF;">% See also conv2, convBox, gaussSmooth</span><br/>               <span style="color: #A0A0A0">  73</span> <span style="color: #228B22; background: #FFFFFF;">%</span><br/>               <span style="color: #A0A0A0">  74</span> <span style="color: #228B22; background: #FFFFFF;">% Piotr's Image&amp;Video Toolbox      Version 3.02</span><br/>               <span style="color: #A0A0A0">  75</span> <span style="color: #228B22; background: #FFFFFF;">% Copyright 2012 Piotr Dollar &amp; Ron Appel.  [pdollar-at-caltech.edu]</span><br/>               <span style="color: #A0A0A0">  76</span> <span style="color: #228B22; background: #FFFFFF;">% Please email me if you find bugs, or have suggestions or questions!</span><br/>               <span style="color: #A0A0A0">  77</span> <span style="color: #228B22; background: #FFFFFF;">% Licensed under the Simplified BSD License [see external/bsd.txt]</span><br/>               <span style="color: #A0A0A0">  78</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/>       <span style="color: #0000FF">     30 </span><span style="color: #000000; font-weight: bold">  79</span> <span style="color: #000000; background: #FFFFFF;">if( nargin&lt;3 ), s=1; end </span><br/>       <span style="color: #0000FF">     30 </span><span style="color: #000000; font-weight: bold">  80</span> <span style="color: #000000; background: #FFFFFF;">if( nargin&lt;4 ), nomex=0; end </span><br/>       <span style="color: #0000FF">     30 </span><span style="color: #000000; font-weight: bold">  81</span> <span style="color: #000000; background: #FFFFFF;">if( isempty(I) || (r==0 &amp;&amp; s==1) ), J = I; return; end </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">     24 </span><span style="color: #000000; font-weight: bold">  82</span> <a name="Line82"></a><span style="color: #000000; background: #FFFFFF;">m=min(size(I,1),size(I,2)); if( m&lt;4 || 2*r+1&gt;=m ), nomex=1; end </span><br/>               <span style="color: #A0A0A0">  83</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/>       <span style="color: #0000FF">     24 </span><span style="color: #000000; font-weight: bold">  84</span> <span style="color: #000000; background: #FFFFFF;">if( nomex==0 ) </span><br/>       <span style="color: #0000FF">     24 </span><span style="color: #000000; font-weight: bold">  85</span> <span style="color: #000000; background: #FFFFFF;">  if( r&gt;0 &amp;&amp; r&lt;=1 &amp;&amp; s&lt;=2 ) </span><br/><span style="color: #FF0000">  0.02 </span><span style="color: #0000FF">     15 </span><span style="color: #000000; font-weight: bold">  86</span> <a name="Line86"></a><span style="color: #000000; background: #FF8080;">    J = <a href="file85.html">convConst</a>('convTri1',I,12/r/(r+2)-2,s); </span><br/>       <span style="color: #0000FF">      9 </span><span style="color: #000000; font-weight: bold">  87</span> <a name="Line87"></a><span style="color: #228B22; background: #FFFFFF;">  else </span><br/><span style="color: #FF0000">  0.01 </span><span style="color: #0000FF">      9 </span><span style="color: #000000; font-weight: bold">  88</span> <a name="Line88"></a><span style="color: #000000; background: #FF8E8E;">    J = <a href="file85.html">convConst</a>('convTri',I,r,s); </span><br/>       <span style="color: #0000FF">      9 </span><span style="color: #000000; font-weight: bold">  89</span> <a name="Line89"></a><span style="color: #000000; background: #FFFFFF;">  end </span><br/>               <span style="color: #A0A0A0">  90</span> <span style="color: #228B22; background: #FFFFFF;">else</span><br/>               <span style="color: #A0A0A0">  91</span> <span style="color: #A0A0A0; background: #FFFFFF;">  if(r&lt;=1), p=12/r/(r+2)-2; f=[1 p 1]/(2+p); r=1;</span><br/>               <span style="color: #A0A0A0">  92</span> <span style="color: #A0A0A0; background: #FFFFFF;">  else f=[1:r r+1 r:-1:1]/(r+1)^2; end</span><br/>               <span style="color: #A0A0A0">  93</span> <span style="color: #A0A0A0; background: #FFFFFF;">  J = padarray(I,[r r],'symmetric','both');</span><br/>               <span style="color: #A0A0A0">  94</span> <span style="color: #A0A0A0; background: #FFFFFF;">  J = convn(convn(J,f,'valid'),f','valid');</span><br/>               <span style="color: #A0A0A0">  95</span> <span style="color: #A0A0A0; background: #FFFFFF;">  if(s&gt;1), t=floor(s/2)+1; J=J(t:s:end-s+t,t:s:end-s+t,:); end</span><br/>               <span style="color: #A0A0A0">  96</span> <span style="color: #A0A0A0; background: #FFFFFF;">end</span><br/></pre></body></html>